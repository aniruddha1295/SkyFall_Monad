# Story 2.1: Market List with Grid Display

Status: review

## Story

As a user,
I want to see all active weather markets in a card grid,
So that I can browse what's available to bet on.

## Acceptance Criteria

**Given** I visit the HomePage (`/`)
**When** the page loads
**Then** I see a hero section at the top with:
- Heading: "Predict Weather. Hedge Risk. Win MON."
- Subtitle: "Powered by Monad's parallel EVM"
- A purple call-to-action button: "Explore Markets" that scrolls down to the market grid
**And** the hero text uses `text-4xl font-bold` on desktop and `text-2xl` on mobile

**Given** the contract has 3 seeded markets
**When** the `useContract` hook fetches market data
**Then** it calls `contract.marketCount()` to get the total number of markets
**And** it loops from 0 to `marketCount - 1`, calling `contract.getMarket(i)` for each
**And** it calls `contract.getOdds(i)` for each market to get YES/NO percentages
**And** all fetched markets are stored in React state as an array of `Market` objects
**And** a loading state shows pulsing skeleton cards (`animate-pulse` with `bg-bg-hover` rectangles) while data loads

**Given** markets are loaded
**When** the MarketList renders
**Then** I see a responsive grid:
- Desktop (>= 1024px): 3 columns (`grid-cols-3`)
- Tablet (>= 768px): 2 columns (`grid-cols-2`)
- Mobile (< 768px): 1 column (`grid-cols-1`)
**And** grid gap is `gap-6` (24px)

**Given** a MarketCard renders for each market
**When** I look at a card
**Then** it shows:
- City name in bold (`text-xl font-bold`)
- Weather condition icon (rain droplet for RAINFALL, thermometer for TEMPERATURE, wind for WIND_SPEED -- using emoji or simple SVG)
- Market question in plain English: e.g., "Will Nagpur rainfall be above 10.00mm?" (generated by `formatters.marketQuestion()`)
- The OddsBar component (placeholder horizontal bar for now; Story 2.2 implements it fully)
- Total pool size: `formatMON(market.totalYesPool + market.totalNoPool)` + " MON"
- Time remaining: `formatCountdown(market.resolutionTime)` (e.g., "5h 23m left")
- Status badge: "OPEN" (green pill) for status=0, "RESOLVED" (gray pill) for status=1
**And** the card has `bg-bg-surface rounded-xl border border-border p-6` styling
**And** on hover, the card has a purple glow shadow (`shadow-[0_10px_15px_-3px_rgba(139,92,246,0.15)]`) and slight scale (`hover:scale-[1.02]`) with `transition-all duration-300`

**Given** I see a MarketCard
**When** I click on it
**Then** I navigate to `/market/{market.id}` via `react-router-dom`'s `useNavigate` or a `<Link>` wrapper
**And** the card has `cursor-pointer` styling

**Given** the HomePage has a "How It Works" section
**When** I scroll below the market grid
**Then** I see 3 steps displayed in a row (stacked on mobile):
1. "Choose a weather market" (with a cloud icon)
2. "Bet YES or NO with MON" (with a coin icon)
3. "Win if your prediction is correct" (with a trophy icon)

## Tasks / Subtasks

- [x] Create HomePage with hero section (heading, subtitle, CTA button)
- [x] Implement responsive hero text sizing (text-4xl desktop, text-2xl mobile)
- [x] Create useContract hook to fetch markets from contract
- [x] Fetch marketCount and loop to get each market via getMarket()
- [x] Fetch odds for each market via getOdds()
- [x] Store markets in React state as Market[] array
- [x] Implement loading skeleton cards with animate-pulse
- [x] Create MarketList component with responsive grid (1/2/3 columns)
- [x] Create MarketCard component with city, icon, question, odds bar, pool size, countdown, status
- [x] Style MarketCard with bg-bg-surface, rounded-xl, border, hover effects
- [x] Make MarketCard clickable, navigating to /market/:id
- [x] Create "How It Works" section with 3 steps
- [x] Ensure grid gap-6 spacing between cards

## Dev Notes

- Implementation completed outside formal BMAD workflow
- Retroactive review being performed

### References

- [Source: _bmad-output/planning-artifacts/epics.md]
- [Source: _bmad-output/planning-artifacts/architecture.md]

## Dev Agent Record

### Agent Model Used

Claude (pre-BMAD workflow)

### File List

- `weather-bets/frontend/src/pages/HomePage.tsx`
- `weather-bets/frontend/src/components/MarketCard.tsx`
- `weather-bets/frontend/src/components/MarketList.tsx`
- `weather-bets/frontend/src/hooks/useContract.ts`
